<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Prediction Result | Breast Cancer AI System</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;600&display=swap" rel="stylesheet">
<style>
body {
  background: #ffe6f0;
  font-family: 'Poppins', sans-serif;
}
h1, h2 {
  color: #ff3399;
  margin-top: 20px;
  text-align: center;
}
h3 {
  color: #d63384;
  margin-top: 25px;
  text-align: center;
}
.card {
  background: white;
  border-radius: 15px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
  padding: 25px;
  margin-top: 30px;
  border-left: 5px solid #e91e63;
}
.result-label {
  text-align: center;
  font-size: 22px;
  font-weight: 600;
  margin: 15px 0;
}
.benign {
  color: #28a745;
}
.malignant {
  color: #dc3545;
}
.images-section {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 25px;
  margin-top: 25px;
}
.image-box {
  background: #fff3f6;
  padding: 10px;
  border-radius: 15px;
  box-shadow: 0 3px 10px rgba(0,0,0,0.1);
  transition: 0.3s;
}
.image-box:hover {
  transform: scale(1.03);
}
.image-box img {
  border-radius: 10px;
  max-height: 320px;
  width: auto;
}
.explanation-box {
  background: #fdf2f8;
  border-left: 6px solid #e91e63;
  padding: 20px;
  margin-top: 30px;
  border-radius: 12px;
  font-size: 17px;
  color: #444;
  line-height: 1.6;
  box-shadow: 0 3px 10px rgba(0,0,0,0.08);
}
.btn-custom {
  background: #ff66b2;
  color: white;
  padding: 10px 25px;
  border-radius: 8px;
  border: none;
  display: block;
  margin: 30px auto 0;
  font-size: 18px;
}
.btn-custom:hover {
  background: #ff3399;
  color: white;
}
footer {
  text-align: center;
  margin: 30px 0;
  font-size: 14px;
  color: #555;
}
</style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg" style="background: linear-gradient(135deg, #e91e63, #f48fb1);">
  <div class="container">
    <a class="navbar-brand text-white fw-bold" href="/">ü©∫ Breast Cancer AI System</a>
    <button class="navbar-toggler bg-light" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item"><a class="nav-link text-white" href="/">Home</a></li>
        <li class="nav-item"><a class="nav-link text-white" href="/register">Register</a></li>
        <li class="nav-item"><a class="nav-link text-white" href="/login">Login</a></li>
        <li class="nav-item"><a class="nav-link text-white" href="/dashboard">Dashboard</a></li>
        <li class="nav-item"><a class="nav-link text-white" href="/contact">Contact</a></li>
      </ul>
    </div>
  </div>
</nav>

<div class="container">
  <h2>ü©∫ Breast Cancer Detection Result</h2>
  <p class="text-center text-muted">AI-based prediction with Grad-CAM visualization and explanation</p>

  <div class="card">
    <div class="result-label">
      Prediction: 
      {% if label == "Benign" %}
        <span class="benign">ü©∑ {{ label }}</span>
      {% else %}
        <span class="malignant">‚ö†Ô∏è {{ label }}</span>
      {% endif %}
    </div>

    <p class="text-center">Confidence: <strong>{{ confidence }}%</strong></p>

    <div class="images-section">
      <div class="image-box">
        <h6 class="text-center text-muted">üñº Original Image</h6>
        <img src="{{ image_file }}" alt="Uploaded Image" class="img-fluid" />
      </div>

      <div class="image-box">
        <h6 class="text-center text-muted">üî• Grad-CAM Heatmap</h6>
        <img src="{{ heatmap_file }}" alt="Heatmap" class="img-fluid" />
      </div>
    </div>

    <div class="explanation-box mt-4">
      {% if label == "Malignant" %}
        <p><strong style="color:#dc3545;">ü©∏ Estimated Cancer Type:</strong> 
          <span style="color:#c2185b;">{{ explanation.split('ü©∏ **Estimated Cancer Type:** ')[1].split('\n')[0] }}</span>
        </p>
        <p><strong style="color:#dc3545;">üìä Estimated Stage:</strong> 
          <span style="color:#b71c1c;">{{ explanation.split('üìä **Estimated Stage:** ')[1].split('\n')[0] }}</span>
        </p>
        <p class="mt-3">{{ explanation.split('Stage:**')[1].split('\n\n')[1] }}</p>
      {% else %}
        <p>{{ explanation }}</p>
      {% endif %}
    </div>

    <a href="/index" class="btn btn-custom">‚¨ÖÔ∏è Upload Another Image</a>
  </div>
</div>


<footer>
  Developed with üíó by <strong>Our Team Digital Storm</strong> | PA College of Engineering, Mangalore
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
